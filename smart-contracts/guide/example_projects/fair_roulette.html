<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-smart-contracts docs-doc-id-guide/example_projects/fair_roulette">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="TNTT Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="TNTT Wiki Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="TNTT Wiki" href="/opensearch.xml">
<link rel="preconnect" href="${matomoUrl}">
<script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://matomo.antonionardella.it/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","6"]);var e=document,t=e.createElement("script"),p=e.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=a+"matomo.js",p.parentNode.insertBefore(t,p)}()</script>
<script>!function(t,h,e,j,s,n){t.hj=t.hj||function(){(t.hj.q=t.hj.q||[]).push(arguments)},t._hjSettings={hjid:2809821,hjsv:6},s=h.getElementsByTagName("head")[0],(n=h.createElement("script")).async=1,n.src="https://static.hotjar.com/c/hotjar-"+t._hjSettings.hjid+".js?sv="+t._hjSettings.hjsv,s.appendChild(n)}(window,document)</script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-rh="true">fair_roulette | TNTT Wiki</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tntt-wiki.github.io/smart-contracts/guide/example_projects/fair_roulette"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-smart-contracts-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-smart-contracts-current"><meta data-rh="true" property="og:title" content="fair_roulette | TNTT Wiki"><meta data-rh="true" name="description" content="An example game project with frontend and contract, demonstrating the development, setup, and interaction with a smart contract."><meta data-rh="true" property="og:description" content="An example game project with frontend and contract, demonstrating the development, setup, and interaction with a smart contract."><meta data-rh="true" name="keywords" content="Smart Contracts,Rust,poc,proof of concept,node,nvm,JavaScript,TypeScript,Wasm,tutorial"><meta data-rh="true" property="og:image" content="https://tntt-wiki.github.io/img/logo/WASP_logo_dark.png"><meta data-rh="true" name="twitter:image" content="https://tntt-wiki.github.io/img/logo/WASP_logo_dark.png"><link data-rh="true" rel="icon" href="/img/learn/tntt_logo.jpg"><link data-rh="true" rel="canonical" href="https://tntt-wiki.github.io/smart-contracts/guide/example_projects/fair_roulette"><link data-rh="true" rel="alternate" href="https://tntt-wiki.github.io/smart-contracts/guide/example_projects/fair_roulette" hreflang="en"><link data-rh="true" rel="alternate" href="https://tntt-wiki.github.io/smart-contracts/guide/example_projects/fair_roulette" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YTLE56KAO4-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.79458214.css">
<link rel="preload" href="/assets/js/runtime~main.8139a13d.js" as="script">
<link rel="preload" href="/assets/js/main.a258838c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#7da7ff;color:#000000" role="banner"><div class="announcementBarContent_KsVm">Would you like to correct/contribute a resource or guide? <a target="_blank" href="https://assembly.sc">Click here</a> for instructions.</div></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/learn/tntt_logo.jpg" alt="TNTT Wiki Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/learn/tntt_logo.jpg" alt="TNTT Wiki Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><a class="navbar__item navbar__link" href="/learn/about-iota/an-introduction-to-iota"><div class="link"><div class="link__body"><div class="link__label">Au Nhi</div></div></div></a><a class="navbar__item navbar__link" href="/participate/support-the-network/about-nodes"><div class="link"><div class="link__body"><div class="link__label">Thieu Nhi</div></div></div></a><a class="navbar__item navbar__link" href="/participate/support-the-network/about-nodes"><div class="link"><div class="link__body"><div class="link__label">Nghia Si</div></div></div></a><a class="navbar__item navbar__link" href="/participate/support-the-network/about-nodes"><div class="link"><div class="link__body"><div class="link__label">Participate</div></div></div></a><a class="navbar__item navbar__link" href="/participate/support-the-network/about-nodes"><div class="link"><div class="link__body"><div class="link__label">Huynh Truong</div></div></div></a><div class="dropdown dropdown--hoverable dropdown--mega"><a class="navbar__item navbar__link navbar__link--active"><div class="link"><div class="link__body"><div class="link__label">Build | Wasp Node</div></div></div></a><div class="dropdown__container"><div class="dropdown__menu"><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Getting Started</div></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Chrysalis (IOTA 1.5)</div></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Libraries</div></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Smart Contracts</div></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/build/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Getting Started</div><div class="link__sublabel">IOTA development basics</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/chrysalis-docs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Chrysalis Docs</div><div class="link__sublabel">Mainnet documentation</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/iota.rs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Client</div><div class="link__sublabel">Interact with the IOTA network</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a aria-current="page" class="dropdown__link dropdown__link--active" href="/smart-contracts/overview"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Wasp Node</div><div class="link__sublabel">Smart contract node</div></div></div></a></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Integrations</div></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/bee/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Bee Node</div><div class="link__sublabel">IOTA node written in Rust</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/wallet.rs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Wallet</div><div class="link__sublabel">Build IOTA wallets</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Coordicide (IOTA 2.0)</div></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/integration-services/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Streams and Identity</div><div class="link__sublabel">Integrate IOTA seamlessly</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/hornet/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Hornet Node</div><div class="link__sublabel">IOTA node written in Go</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/stronghold.rs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Stronghold</div><div class="link__sublabel">Handle secrets securely</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/IOTA-2.0-Research-Specifications/Preface"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Coordicide Specs</div><div class="link__sublabel">Decentralizing IOTA</div></div></div></a></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/chronicle.rs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Chronicle Permanode</div><div class="link__sublabel">IOTA permanode</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/identity.rs/introduction"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Identity</div><div class="link__sublabel">Identity framework</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/goshimmer/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">GoShimmer Node</div><div class="link__sublabel">IOTA 2.0 node</div></div></div></a></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/streams/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Streams</div><div class="link__sublabel">Share data securely</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div></div></div></div></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog"><div class="link"><div class="link__body"><div class="link__label">Contribute</div></div></div></a><a class="navbar__item navbar__link" href="/about"><div class="link"><div class="link__body"><div class="link__label">About</div></div></div></a><a class="navbar__item navbar__link" href="/team"><div class="link"><div class="link__body"><div class="link__label">Team</div></div></div></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/"><img src="/img/learn/tntt_logo.jpg" alt="TNTT Wiki Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/learn/tntt_logo.jpg" alt="TNTT Wiki Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></a><nav class="menu thin-scrollbar menu_izAj menuWithAnnouncementBar_l2a_"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/smart-contracts/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smart-contracts/guide/core_concepts/smart-contracts">Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smart-contracts/guide/chains_and_nodes/running-a-node">ISCP Chains and Nodes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smart-contracts/guide/wasm_vm/intro">Wasm VM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smart-contracts/guide/evm/introduction">EVM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/smart-contracts/guide/example_projects/fair_roulette">Example projects</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/smart-contracts/guide/example_projects/fair_roulette">Fair Roulette</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smart-contracts/guide/development_tools/docker_preconfigured">Development tools</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/smart-contracts/contribute">Contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/smart-contracts/metrics">Metrics</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>fair_roulette</h1></header><h1>Fair Roulette</h1><p>Fair roulette is an example reference implementation which demonstrates the development, setup, and interaction with a smart contract.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>The Fair roulette example project is a simple betting game in which players can bet on a number within a certain range.</p><p>The game consists of many rounds in which the player will try to bet on the right number to win a share of the bet funds.</p><p>A round is running for a certain amount of time. In the example its 60 seconds. In this timeframe, incoming bets will be added to a list of bets. After 60 seconds have passed, a winning number will be randomly generated and all players who made the right guess will receive their share of the pot.</p><p>If no round is <em>active</em> when a bet gets placed, the round gets initiated immediately.</p><p>The random number is generated by the native randomness of the IOTA Smart Contracts consensus.
It is unpredictable by anybody, including an individual validator node.
Therefore the roulette is Fair.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="mandatory-setup">Mandatory Setup<a class="hash-link" href="#mandatory-setup" title="Direct link to heading">​</a></h2><p>The mandatory setup consists out of:</p><ul><li>1 <a href="https://wiki.iota.org/goshimmer/welcome" target="_blank" rel="noopener noreferrer">GoShimmer</a> node &gt;= 0.7.5v (<a href="https://github.com/iotaledger/goshimmer/commit/25c827e8326a" target="_blank" rel="noopener noreferrer">25c827e8326a</a>)</li><li>1 Beta <a href="/smart-contracts/guide/chains_and_nodes/running-a-node">Wasp node</a>.</li><li>1 Static file server (nginx, Apache, fasthttp)</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="technicalities">Technicalities<a class="hash-link" href="#technicalities" title="Direct link to heading">​</a></h2><p>Before you dive into the contents of the project, you should take a look at important fundamentals.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="fundamentals">Fundamentals<a class="hash-link" href="#fundamentals" title="Direct link to heading">​</a></h3><p>Wasp is part of the IOTA ecosystem that enables the execution of smart contracts. These contracts run logic and are allowed to do state (change) requests towards the Tangle. You will need a GoShimmer node to be able to store state. It receives state change requests and, if valid, saves them onto the Tangle. </p><p>There are two ways to interact with smart contracts.</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="on-ledger-requests">On Ledger Requests<a class="hash-link" href="#on-ledger-requests" title="Direct link to heading">​</a></h4><p>See: <a href="/smart-contracts/guide/core_concepts/smartcontract-interaction/on-ledger-requests">On-ledger Requests</a></p><p>On-ledger requests are sent to GoShimmer nodes. Wasp periodically requests new On-ledger requests from GoShimmer nodes, and handles them accordingly. These messages are validated through the network and take some time to be processed. </p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="off-ledger-requests">Off Ledger Requests<a class="hash-link" href="#off-ledger-requests" title="Direct link to heading">​</a></h4><p>See: <a href="/smart-contracts/guide/core_concepts/smartcontract-interaction/off-ledger-requests">Off-ledger Requests</a></p><p>Off-ledger requests are directly sent to Wasp nodes and do not require validation through GoShimmer nodes. They are therefore faster. However, they require an initial deposit of funds to a chain account as this account will initiate required On-ledger requests on behalf of the desired contract or player.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>This example uses On-ledger requests to initiate a betting request. A method to invoke Off-ledger requests is implemented inside the frontend.</p><p>See: <a href="https://github.com/iotaledger/wasp/blob/7b3ddc54891ccf021c7aaa32db35d88361fade16/contracts/wasm/fairroulette/frontend/src/lib/fairroulette_client/fair_roulette_service.ts#L133" target="_blank" rel="noopener noreferrer">placeBetOffLedger</a></p></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="funds">Funds<a class="hash-link" href="#funds" title="Direct link to heading">​</a></h4><p>As these requests cost some fees, and to be able to bet with real tokens, the player will need a source of funds.  </p><p>As the game runs on a testnet, you can request funds from the GoShimmer faucets inside the network. </p><p>See: <a href="https://wiki.iota.org/goshimmer/tutorials/obtain_tokens" target="_blank" rel="noopener noreferrer">How to Obtain Tokens From the Faucet</a></p><p>After you have acquired some funds, they will reside inside an address that is handled by a wallet.</p><p>For this PoC, we have implemented a very narrowed-down wallet that runs inside the browser itself, mostly hidden from the player. </p><p>In the future, we want to provide a solution that enables the use of <a href="https://firefly.iota.org/" target="_blank" rel="noopener noreferrer">Firefly</a> or MetaMask as a secure external wallet.</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">​</a></h4><p>To interact with a smart contract, you will need:</p><ul><li>A Wasp node that hosts the contract</li><li>A GoShimmer node to interact with the tangle</li><li>Funds from a GoShimmer faucet</li><li>A client that invokes the contract by either an On Ledger request or Off Ledger request. In this example, the Frontend acts as the client.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="implementation">Implementation<a class="hash-link" href="#implementation" title="Direct link to heading">​</a></h3><p>The PoC consists of two projects residing in <code>contracts/wasm/fairroulette</code>.</p><p>One is the smart contract itself. Its boilerplate was generated using the new <a href="/smart-contracts/guide/wasm_vm/intro">Schema tool</a> which is shipped with this beta release.
The contract logic is written in Rust, but the same implementation can be achieved interchangeably with Golang which is demonstrated in the root folder and <code>./src</code>.</p><p>The second project is an interactive frontend written in TypeScript, made reactive with the light Svelte framework. You can find it in the sub-folder <code>./frontend</code>.
This frontend sends On-ledger requests to place bets towards the fair roulette smart contract and makes use of the GoShimmer faucet to request funds.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="the-smart-contract">The Smart Contract<a class="hash-link" href="#the-smart-contract" title="Direct link to heading">​</a></h3><p>See: <a href="https://wiki.iota.org/wasp/guide/core_concepts/smart-contract-anatomy" target="_blank" rel="noopener noreferrer">Anatomy of a Smart Contract</a></p><p>As the smart contract is the only actor that is allowed to modify state in the context of the game, it needs to handle a few tasks such as:</p><ul><li>Validating and accepting placed bets</li><li>Starting and ending a betting round</li><li>Generating a <strong>random</strong> winning number </li><li>Sending payouts to the winners</li><li>Emitting status updates through the event system</li></ul><p>Any incoming bet will be validated. This includes the amount of tokens which have been bet and also the number on which the player bet on. For example, any number over 8 or under 1 will be rejected.</p><p>If the bet is valid and no round is active, the round state will be changed to <code>1</code>, marking an active round. The bet will be the first of a list of bets. </p><p>A delayed function call will be activated which executes <strong>after 60 seconds</strong>. </p><p>This function is the payout function that generates a random winning number, and pays out the winners of the round. After this, the round state will be set to <code>0</code> indicating the end of the round.   </p><p>If a round is already active, the bet will be appended to the list of bets and await processing. </p><p>All state changes such as the <code>round started</code> ,<code>round ended</code>, <code>placed bets</code>, and the <code>payout of the winners</code> are published as events.  Events are published as messages through a public web socket.</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="dependencies">Dependencies<a class="hash-link" href="#dependencies" title="Direct link to heading">​</a></h4><ul><li><a href="https://rustwasm.github.io/docs/wasm-pack/quickstart.html" target="_blank" rel="noopener noreferrer">wasm-pack</a></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="building-the-contract">Building the Contract<a class="hash-link" href="#building-the-contract" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> contracts/wasm/fairroulette</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wasm-pack build </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="the-frontend">The Frontend<a class="hash-link" href="#the-frontend" title="Direct link to heading">​</a></h3><p>The frontend has two main tasks.</p><ol><li><p><strong>Visualize the contract&#x27;s state</strong>:  This includes the list of all placed bets, if a round is currently active and how long it&#x27;s still going. Any payouts will be shown as well, including a fancy animation in case the player has won. The player can also see his current available funds, his seed, and his current address.</p><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>The seed is the key to your funds. We display the seed for demonstration purposes only in this PoC.
<strong>Never share your seed with anyone under any circumstance.</strong></p></div></div></li><li><p><strong>Enable the player to request funds and participate in the game by placing bets</strong>: This is done by showing the player a list of eight numbers, a selection of the amount of funds to bet, and a bet placing button. </p><p>As faucet requests require minimal proof of work, the calculation happens inside a web worker to prevent freezing the browser UI.</p><p>To provide the frontend with the required events, it subscribes to the public web socket of Wasp to receive state changes. </p><p>These state change events look like this:</p><p><code>vmmsg kUUCRkhjD4EGAxv3kM77ay3KMbo51UhaEoCr14TeVHc5 df79d138: fairroulette.bet.placed 2sYqEZ5GM1BnqkZ88yJgPH3CdD9wKqfgGKY1j8FYDSZb3ao5wu 531819 2</code> </p><p>This event displays a placed bet from the address <code>12sYqEZ5GM1BnqkZ88yJgPH3CdD9wKqfgGKY1j8FYDSZb3ao5wu</code>, a bet of <code>531819i</code> on the number <code>2</code>. Originating from the smart contract ID <code>df79d138</code>.</p><p>However, there is a bit more to the concept than to simply subscribe to a web socket and &quot;perform requests&quot;.</p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="the-communication-layer">The Communication Layer<a class="hash-link" href="#the-communication-layer" title="Direct link to heading">​</a></h3><p>On and Off Ledger requests have a predefined structure. They need to get encoded strictly and include a list of transactions provided by Goshimmer. They also need to get signed by the client using the private key originating from a seed.  </p><p>Wasp uses the <a href="https://wiki.iota.org/goshimmer/protocol_specification/components/advanced_outputs" target="_blank" rel="noopener noreferrer">ExtendedLockedOutput</a> message type, which enables certain additional properties such as: </p><ul><li>A fallback address and a fallback timeout</li><li>Unlockable by AliasUnlockBlock (if address is of Misaddress type)</li><li>A time lock (execution after deadline)</li><li>A data payload for arbitrary metadata (size limits apply)</li></ul><p>This data payload is required to act on smart contracts as it contains: </p><ul><li>The smart contract ID to be selected</li><li>The function ID to be executed</li><li>A list of arguments to be passed into the function </li></ul><p>As we do not expect contract and frontend developers to write their own implementation, we have separated the communication layer into two parts:</p><ul><li><a href="#the-fairroulette-service">The fairroulette_service</a></li><li><a href="#the-wasp-client">The wasp_client</a></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="the-wasp-client">The Wasp Client<a class="hash-link" href="#the-wasp-client" title="Direct link to heading">​</a></h4><p>The wasp client is an example implementation of the communication protocol.</p><p>It provides:</p><ul><li>A basic wallet functionality</li><li>Hashing algorithms</li><li>A web worker to provide proof of work </li><li>Construction of On/Off Ledger requests</li><li>Construction of smart contract arguments and payloads</li><li>Generation of seeds (including their private keys and addresses)</li><li>Serialization of data into binary messages</li><li>Deserialization of smart contract state</li></ul><p>This wasp_client can be seen as a soon-to-be external library. For now, this is a PoC client library shipped with the project. However, in the future , we want to provide a library you can simply include in your project.</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="the-fairroulette-service">The Fairroulette Service<a class="hash-link" href="#the-fairroulette-service" title="Direct link to heading">​</a></h4><p>This service is meant to be a high-level implementation of the actual app. In other words: it&#x27;s the service that app or frontend developers would concentrate on. </p><p>It does not construct message types, nor does it interact with GoShimmer directly. Besides subscribing to the web socket event system of Wasp, it does not interact directly with Wasp either. Such communications are handled by the <a href="#the-wasp-client"><code>wasp_client</code></a>.</p><p>The fairroulette service is a mere wrapper around smart contract invocation calls. It accesses the smart contract state through the <code>wasp_client</code> and does minimal decoding of data. </p><p>Let&#x27;s take a look into three parts of this service to make this more clear.</p><p>This service comprises two parts:</p><ul><li><a href="#placebetonledger">PlaceBetOnLedger</a></li><li><a href="#callview">CallView</a></li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="placebetonledger">PlaceBetOnLedger<a class="hash-link" href="#placebetonledger" title="Direct link to heading">​</a></h5><p>The <a href="https://github.com/iotaledger/wasp/blob/7b3ddc54891ccf021c7aaa32db35d88361fade16/contracts/wasm/fairroulette/frontend/src/lib/fairroulette_client/fair_roulette_service.ts#L149" target="_blank" rel="noopener noreferrer">placeBetOnLedger</a> function is responsible for sending On-Ledger bet requests. It constructs a simple OnLedger object containing:</p><ul><li>The smart contract ID: <code>fairroulette</code> </li><li>The function to invoke: <code>placeBet</code> </li><li>An argument: <code>-number</code> <ul><li>this is the number the player would bet on, the winning number  </li></ul></li></ul><p>This transaction also requires an address to send the request to, and also a variable amount of funds over <code>0i</code>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>For Wasp, the address to send funds to is the chainId.</p></div></div><p>See: <a href="https://wiki.iota.org/wasp/misc/coretypes" target="_blank" rel="noopener noreferrer">CoreTypes</a> and <a href="https://wiki.iota.org/wasp/guide/solo/invoking-sc" target="_blank" rel="noopener noreferrer">Invoking</a></p><h5 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="callview">CallView<a class="hash-link" href="#callview" title="Direct link to heading">​</a></h5><p>The <a href="https://github.com/iotaledger/wasp/blob/7b3ddc54891ccf021c7aaa32db35d88361fade16/contracts/wasm/fairroulette/frontend/src/lib/fairroulette_client/fair_roulette_service.ts#L165" target="_blank" rel="noopener noreferrer">callView</a> function is responsible for calling smart contract view functions. </p><p>See: <a href="https://wiki.iota.org/wasp/guide/solo/view-sc" target="_blank" rel="noopener noreferrer">Calling a view</a> </p><p>To give access to the smart contracts state, you can use view functions to return selected parts of the state. </p><p>In this use case, you can poll the state of the contract at the initial page load of the frontend.
State changes that happen afterwards are published through the websocket event system.</p><p>You can find examples to guide you in building similar functions in:</p><ul><li><p>Frontend: <a href="https://github.com/iotaledger/wasp/blob/7b3ddc54891ccf021c7aaa32db35d88361fade16/contracts/wasm/fairroulette/frontend/src/lib/fairroulette_client/fair_roulette_service.ts#L181" target="_blank" rel="noopener noreferrer">getRoundStatus</a> </p></li><li><p>Smart Contract: <a href="https://github.com/iotaledger/wasp/blob/7b3ddc54891ccf021c7aaa32db35d88361fade16/contracts/wasm/fairroulette/src/fairroulette.rs#L312" target="_blank" rel="noopener noreferrer">view_round_status</a></p></li></ul><p>Since data returned by the views is encoded in Base64, the frontend needs to decode this by using simple <code>Buffer</code> methods.
The <code>view_round_status</code> view returns an <code>UInt16</code> which has a state of either <code>0</code> or <code>1</code>. </p><p>This means that to get a proper value from a view call, you should use <code>readUInt16LE</code> to decode the matching value.</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="dependencies-1">Dependencies<a class="hash-link" href="#dependencies-1" title="Direct link to heading">​</a></h4><ul><li><a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">NodeJS &gt;= 14</a><br>If you use a different version of node, you can use <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvm</a> to switch node versions.</li><li><a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">NPM</a></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="install-dependencies">Install Dependencies<a class="hash-link" href="#install-dependencies" title="Direct link to heading">​</a></h4><ol><li><p>Go to your frontend directory ( contracts/wasm/fairroulette/frontend for example)</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain">  contracts/wasm/fairroulette/frontend</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></li><li><p>Install dependencies running:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></li></ol><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h4><p>The frontend requires that you create a config file. You can copy the template from <code>contracts/wasm/fairroulette/frontend/config.dev.sample.js</code>, and rename it to <code>config.dev.js</code> inside the same folder.</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> config.dev.sample.js config.dev.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Make sure to update the config values according to your setup.</p><p>The <code>chainId</code> is the chainId which gets defined after <a href="/smart-contracts/guide/chains_and_nodes/setting-up-a-chain#deploy-the-iscp-chain">deploying a chain</a>.  You can get your chain id from your dashboard, or list all chains by running:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">wasp-cli chain list</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>waspWebSocketUrl</code>, <code>waspApiUrl</code>, and <code>goShimmerApiUrl</code> are dependent on the location of your Wasp and GoShimmer nodes. Make sure to keep the path of the <code>waspWeb SocketUrl</code> (<code>/chain/%chainId/ws</code>) at the end. </p><p><code>seed</code> can be either <code>undefined</code> or a predefined 44 length seed. If <code>seed</code> is set to <code>undefined</code> a new seed will be generated as soon a user opens the page. A predefined seed will be set for all users. This can be useful for development purposes. </p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="building-the-fronted">Building The Fronted<a class="hash-link" href="#building-the-fronted" title="Direct link to heading">​</a></h4><p>You can build the frontend by running the following commands:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> contracts/wasm/fairroulette/frontend</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run build_worker</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>After this, you can run <code>npm run dev</code> which will run a development server that exposes the transpiled frontend on <a href="http://localhost:5000" target="_blank" rel="noopener noreferrer"><code>http://localhost:5000</code></a>.</p><p>If you want to expose the dev server to the public, it might be required to bind the server to any endpoint like <code>HOST=0.0.0.0 PORT=5000 npm run dev</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="deployment">Deployment<a class="hash-link" href="#deployment" title="Direct link to heading">​</a></h2><p>You should follow the <a href="/smart-contracts/guide/chains_and_nodes/setting-up-a-chain#deploy-the-iscp-chain">Deployment</a> documentation until you reach the <code>deploy-contract</code> command.</p><p>The deployment of a contract requires funds to be deposited to the <strong>chain</strong>.
You can do this by executing the following command from the directory where your Wasp node was configured: </p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">wasp-cli chain deposit IOTA:10000</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Make sure to <a href="#building-the-contract">Build</a> the contract before deploying it. </p><p>Now, you can deploy the contract with a wasmtime configuration.</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">wasp-cli chain deploy-contract wasmtime fairroulette </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fairroulette&quot;</span><span class="token plain">  contracts/wasm/fairroulette/pkg/fairroulette_bg.wasm</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/iotaledger/wasp/edit/develop/documentation/docs/guide/example_projects/fair_roulette.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/smart-contracts/guide/evm/examples/ERC721"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ERC721</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/smart-contracts/guide/development_tools/docker_preconfigured"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">docker_preconfigured</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#mandatory-setup" class="table-of-contents__link toc-highlight">Mandatory Setup</a></li><li><a href="#technicalities" class="table-of-contents__link toc-highlight">Technicalities</a><ul><li><a href="#fundamentals" class="table-of-contents__link toc-highlight">Fundamentals</a></li><li><a href="#implementation" class="table-of-contents__link toc-highlight">Implementation</a></li><li><a href="#the-smart-contract" class="table-of-contents__link toc-highlight">The Smart Contract</a></li><li><a href="#the-frontend" class="table-of-contents__link toc-highlight">The Frontend</a></li><li><a href="#the-communication-layer" class="table-of-contents__link toc-highlight">The Communication Layer</a></li></ul></li><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a></li></ul></div></div></div></div></main></div></div><footer class="footer padding--none"><div class="container"><div class="row footer__links padding-vert--xl"><div class="col footer__col"><h4 class="footer__title">LEARN</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/learn/about-iota/an-introduction-to-iota">About IOTA</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/iota-token/buying-iota">IOTA Token</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/wallets/what-is-a-wallet">Wallets</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/networks/iota-1.5-chrysalis">Networks</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/glossary">Glossary</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/research/research-outline">Research</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/future/future-of-iota">Future of IOTA</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">PARTICIPATE</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/participate/support-the-network/about-nodes">Support the network</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/the-community/discord">The Community</a></li><li class="footer__item"><a href="https://www.iota.org/solutions/partnerships" target="_blank" rel="noopener noreferrer" class="footer__link-item">Partnerships</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/funding/edf-funding">Funding</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/use-cases/industry-applications">Use Cases</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/frameworks/introduction">Frameworks</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">BUILD</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/build/welcome">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/build/fundamentals/cryptography">Fundamentals</a></li><li class="footer__item"><a class="footer__link-item" href="/build/exchange-integration/exchange-integration-guide">Exchange Integration</a></li><li class="footer__item"><a class="footer__link-item" href="/build/tutorials/twitch">Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">WIKI</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/team">Team</a></li><li class="footer__item"><a href="https://github.com/iota-community/iota-wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://github.com/jlvandenhout/docusaurus-plugin-docs-editor" target="_blank" rel="noopener noreferrer" class="footer__link-item">Editor Github</a></li><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/contribute-to-wiki/welcome">Contribute</a></li><li class="footer__item"><a href="https://www.iota.org/impressum" target="_blank" rel="noopener noreferrer" class="footer__link-item">Impressum</a></li><li class="footer__item"><a href="https://www.iota.org/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li></ul></div></div><div class="footer__bottom padding-bottom--xl"><div class="footer__copyright">© 2022 TNTT Wiki. Built with Docusaurus.</div></div></div><div class="social"><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:var(--ifm-color-gray-900)" href="https://www.youtube.com/c/iotafoundation"><div class="social__font social__icon"></div><div class="social__title">Youtube</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#2C3850" href="https://www.github.com/iotaledger/"><div class="social__font social__icon"></div><div class="social__title">GitHub</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#4B576F" href="https://discord.iota.org/"><div class="social__font social__icon"></div><div class="social__title">Discord</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#6A768E" href="https://www.twitter.com/iota/"><div class="social__font social__icon"></div><div class="social__title">Twitter</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#7D89A1" href="https://www.reddit.com/r/iota/"><div class="social__font social__icon"></div><div class="social__title">Reddit</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#8995AD" href="https://www.linkedin.com/company/iotafoundation/"><div class="social__font social__icon"></div><div class="social__title">LinkedIn</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#99A5BD" href="https://www.instagram.com/iotafoundation/"><div class="social__font social__icon"></div><div class="social__title">Instagram</div></a></div></footer></div>
<script src="/assets/js/runtime~main.8139a13d.js"></script>
<script src="/assets/js/main.a258838c.js"></script>
</body>
</html>